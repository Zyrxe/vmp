import requests
import base64

# =============================
# 1️⃣ Masukkan API Key kamu di sini
# =============================
API_KEY = "AIzaSyCgtU-KpwC5bjQS1QHFzFsPf81RevkHHbc"  # <-- Ganti dengan API key kamu, JANGAN dibagikan ke publik

# =============================
# 2️⃣ Masukkan gambar wajah kamu
# =============================
# Ganti 'face.jpg' dengan nama file gambar wajah laki-laki yang kamu punya
with open("face.jpg", "rb") as f:
    image_base64 = base64.b64encode(f.read()).decode("utf-8")

# =============================
# 3️⃣ Prompt untuk menjaga wajah tetap sama
# =============================
prompt_text = (
    "Use the provided face image as reference. "
    "Keep the person's facial identity, features, and proportions exactly the same — "
    "do not modify or stylize the face. "
    "Generate a high-quality, realistic portrait in 9:16 aspect ratio. "
    "You may adjust lighting and background artistically, but the person's face must remain identical."
)

# =============================
# 4️⃣ Request ke API Gemini
# =============================
url = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent"

headers = {
    "Content-Type": "application/json",
    "x-goog-api-key": API_KEY
}

payload = {
    "contents": [
        {
            "parts": [
                {"text": prompt_text},
                {
                    "inline_data": {
                        "mime_type": "image/jpeg",
                        "data": image_base64
                    }
                }
            ]
        }
    ]
}

response = requests.post(url, headers=headers, json=payload)

# =============================
# 5️⃣ Tampilkan hasil respons
# =============================
if response.status_code == 200:
    print("✅ Success:")
    print(response.json())
else:
    print("❌ Error:", response.status_code, response.text)
